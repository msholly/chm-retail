"use strict";!function(i){i(document).ready(function(){var e,a,t,o,n,r;s(),i("#loan-calculator input").change(s).keyup(s),i("form.geodir-listing-search").each(function(e){var a=i(this).find("input[name='stype']").val();void 0===a&&(a=i(this).find("select[name='stype']").val()),l(),i(".geodir-search-container").addClass("stype-"+a),"gd_loan_officer"!=a||i("body").hasClass("geodir-page-search")||i(".stype-gd_loan_officer .gd-search-field-search, .searchBy-lo-name").hide()}),i(".chm-search").on("click",".chm-toggle-lo-search",function(e){e.preventDefault();var a=i(".searchBy-lo-near, .stype-gd_loan_officer .gd-search-field-near"),t=i(".searchBy-lo-name, .stype-gd_loan_officer .gd-search-field-search");"search-toggle-lo-name"==this.id?(a.hide(),i(".gd-icon-hover-swap").click(),t.show()):(a.show(),t.hide(),i(".gd-icon-hover-swap").click())}),i("body").hasClass("page-id-3621")&&(i(".geodir-listings .widgettitle").each(function(e){var a=i(this),t=a.text().toLowerCase().trim().replace(/[\.,-\/#!?$%\^&\*;:{}=\-_`~()]/g,"").replace(/ +/g,"-");a.attr("id",t)}),i("#select2-ajax-branch").on("select2:select",function(e){p("#"+e.params.data.id),window.location.hash=e.params.data.id}),i.ajax({type:"GET",dataType:"json",async:!0,url:document.location.origin+"/wp-json/geodir/v2/licenses?per_page=50",data:{},success:function(e){var a,t=i.map(e,function(e){return e.id=e.slug,e.text=e.state_abbreviation+" - "+e.region,console.log(e.text),e}).sort(function(e,a){return e.region<a.region?-1:e.region>a.region?1:0});console.log(t),a=t,i("#select2-ajax-branch").select2({data:a,templateSelection:h,templateResult:d,escapeMarkup:function(e){return e},placeholder:"Search by State"})}}),window.location.hash&&p(window.location.hash)),i("body").hasClass("single-gd_loan_officer")&&i(".lo-single-socials .geodir_post_meta").each(function(e){var a=i(this).children(".geodir_post_meta_icon"),t=i(this).children("a");i(a).prependTo(t)}),i("body").hasClass("single-gd_place")&&(e=i("#contact-info [itemprop='addressRegion']").text(),i(".chm-branch-name .geodir-page-title").append(", "+e),a=i(".branch-lo-our-team li.type-gd_loan_officer"),t=i(".branch-regional-manager li"),o=[],0<t.length&&(n=parseInt(t.data("postId")),i(a).each(function(e){var a=i(this).data("postId");o.push(a)}),-1<(r=i.inArray(n,o))&&i(".branch-lo-our-team li.post-"+o[r]).hide())),"undefined"!=typeof Handlebars&&Handlebars.registerHelper("each_with_sort",function(e,t,a){var o,n,r,i,c,s;for(a.data&&(o=Handlebars.createFrame(a.data)),s="",r=i=0,c=(e=e.sort(function(e,a){return e=e[t],(a=a[t])<e?1:e===a?0:e<a?-1:void 0})).length;i<c;r=++i)n=e[r],o&&(o.index=r),s+=a.fn(n,{data:o});return s})});var o,n,r,c,s=(o=function(){var e,a=parseFloat(i("#loan-amount").val().replace(/\D/g,"")),t=parseFloat(i("#loan-interest-rate").val()),o=parseFloat(i("#loan-years").val());i.isNumeric(a)&&i.isNumeric(t)&&i.isNumeric(o)&&5e3<a?(e=t/100/12*a/(1-Math.pow(1+t/100/12,12*-o)),i("#loan-monthly-payment").text("$"+e.toFixed(0).replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))):i("#loan-monthly-payment").text("")},n=250,function(){var e=this,a=arguments,t=r&&!c;clearTimeout(c),c=setTimeout(function(){c=null,r||o.apply(e,a)},n),t&&o.apply(e,a)});function l(){i("form.geodir-listing-search .search_by_post option[value='gd_lo_team']").remove(),i("form.geodir-listing-search .search_by_post option[value='gd_philanthropy']").remove(),i("form.geodir-listing-search .search_by_post option[value='gd_license']").remove()}function d(e){return e.id?e.region:e.text}function h(e){return""===e.id?"Search by State":e.region}function p(e){var a=i(e),t=i("#main-header").outerHeight()+20;(a=a.length?a:i("[name="+e.slice(1)+"]")).length&&i("html,body").animate({scrollTop:a.offset().top-t},100)}i("#loan-calculator input.number").keyup(function(e){37<=e.which&&e.which<=40||(console.log("COMMAS"),i(this).val(function(e,a){return a.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}))}),i(".geodir-search-container").on("change","select",function(){l();var e=i(".search_by_post option:selected").val();i(".geodir-search-container").removeClass(function(e,a){return(a.match(/\bstype-\S+/g)||[]).join(" ")}),i(".geodir-search-container").addClass("stype-"+e)}),i(document).ajaxComplete(function(){l()})}(jQuery);